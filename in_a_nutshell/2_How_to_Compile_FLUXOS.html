<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLUXOS - How to Compile</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

        :root {
            --primary: #0066cc;
            --primary-dark: #004499;
            --secondary: #00a86b;
            --accent: #ff6b35;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --text: #2d3436;
            --text-light: #636e72;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000;
            overflow: hidden;
        }

        .presentation { height: 100vh; width: 100vw; position: relative; }

        .slide {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: none;
            flex-direction: column;
            padding: 60px 80px;
            background: linear-gradient(135deg, #ffffff 0%, #f5f7fa 100%);
            overflow: hidden;
        }

        .slide.active { display: flex; }

        .slide.title-slide {
            background: linear-gradient(135deg, var(--dark) 0%, #16213e 50%, #0f3460 100%);
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
        }

        .slide.title-slide h1 { font-size: 5rem; font-weight: 700; margin-bottom: 0.5rem; letter-spacing: -2px; }
        .slide.title-slide h1 span { color: var(--primary); }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInScale { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }

        .title-slide .reveal-title { opacity: 0; animation: fadeInScale 0.8s ease-out forwards; animation-delay: 0.2s; }
        .title-slide .reveal-subtitle { opacity: 0; animation: fadeInUp 0.7s ease-out forwards; animation-delay: 0.6s; }
        .title-slide .reveal-author { opacity: 0; animation: fadeInUp 0.6s ease-out forwards; animation-delay: 1.0s; }
        .title-slide .reveal-affiliation { opacity: 0; animation: fadeInUp 0.6s ease-out forwards; animation-delay: 1.2s; }
        .title-slide .reveal-logo { opacity: 0; animation: fadeInUp 0.5s ease-out forwards; animation-delay: 1.4s; }

        .slide.title-slide .subtitle { font-size: 2.2rem; font-weight: 300; color: #a0aec0; margin-bottom: 2rem; }
        .slide.title-slide .author { font-size: 1.4rem; color: #cbd5e0; margin-top: 3rem; }
        .slide.title-slide .affiliation { font-size: 1.1rem; color: #718096; margin-top: 0.5rem; }

        .university-logo { position: absolute; bottom: 30px; right: 40px; height: 60px; opacity: 0.9; }
        .slide.title-slide .university-logo { height: 70px; }
        .slide.section-slide .university-logo { height: 55px; opacity: 0.85; }

        .slide.section-slide {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            justify-content: center; align-items: center; color: white;
        }
        .slide.section-slide.purple { background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%); }
        .slide.section-slide.teal { background: linear-gradient(135deg, #0891b2 0%, #155e75 100%); }
        .slide.section-slide h2 { font-size: 4rem; font-weight: 600; }
        .slide.section-slide .section-number { font-size: 10rem; font-weight: 700; opacity: 0.15; position: absolute; top: 40px; right: 80px; }

        .slide-header { margin-bottom: 40px; }
        .slide-header h2 { font-size: 2.8rem; font-weight: 600; color: var(--dark); border-left: 6px solid var(--primary); padding-left: 24px; }

        .slide-content { flex: 1; display: flex; flex-direction: column; justify-content: flex-start; }

        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; height: 100%; }
        .three-column { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 40px; }
        .column { display: flex; flex-direction: column; }

        .card { background: white; border-radius: 16px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); margin-bottom: 20px; }
        .card.primary { border-left: 5px solid var(--primary); }
        .card.secondary { border-left: 5px solid var(--secondary); }
        .card.accent { border-left: 5px solid var(--accent); }
        .card.purple { border-left: 5px solid #7c3aed; }
        .card h3 { font-size: 1.5rem; color: var(--dark); margin-bottom: 15px; display: flex; align-items: center; gap: 12px; }
        .card p, .card li { font-size: 1.15rem; color: var(--text); line-height: 1.6; }

        ul, ol { margin-left: 30px; }
        li { font-size: 1.4rem; color: var(--text); margin-bottom: 16px; line-height: 1.5; }
        li strong { color: var(--primary-dark); }

        .code-container { position: relative; }
        pre { background: var(--dark); color: #e2e8f0; padding: 25px; border-radius: 12px; font-family: 'JetBrains Mono', monospace; font-size: 0.95rem; line-height: 1.5; overflow-x: auto; }
        .comment { color: #68d391; }
        .string { color: #fbd38d; }
        .keyword { color: #90cdf4; }

        .copy-btn { position: absolute; top: 8px; right: 8px; background: rgba(255,255,255,0.15); border: none; border-radius: 6px; padding: 6px 10px; cursor: pointer; color: #a0aec0; font-size: 0.8rem; transition: all 0.2s; display: flex; align-items: center; gap: 5px; }
        .copy-btn:hover { background: rgba(255,255,255,0.25); color: white; }
        .copy-btn.copied { background: var(--secondary); color: white; }

        .pdf-btn { position: absolute; bottom: 30px; left: 40px; background: rgba(255,255,255,0.15); border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; padding: 10px 20px; cursor: pointer; color: white; font-size: 0.95rem; font-weight: 500; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
        .pdf-btn:hover { background: rgba(255,255,255,0.25); border-color: rgba(255,255,255,0.5); }
        .slide:not(.title-slide) .pdf-btn { background: var(--dark); border-color: var(--dark); color: white; }
        .slide:not(.title-slide) .pdf-btn:hover { background: var(--primary); border-color: var(--primary); }

        .highlight-box { background: linear-gradient(135deg, #fff7ed, #ffedd5); border-left: 5px solid var(--accent); padding: 25px 30px; border-radius: 0 12px 12px 0; margin: 20px 0; }
        .highlight-box.info { background: linear-gradient(135deg, #eff6ff, #dbeafe); border-left-color: var(--primary); }
        .highlight-box.success { background: linear-gradient(135deg, #ecfdf5, #d1fae5); border-left-color: var(--secondary); }
        .highlight-box.warning { background: linear-gradient(135deg, #fff7ed, #ffedd5); border-left-color: var(--accent); }

        table { width: 100%; border-collapse: collapse; font-size: 1.1rem; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        th { background: var(--dark); color: white; padding: 16px 20px; text-align: left; font-weight: 600; }
        td { padding: 14px 20px; border-bottom: 1px solid #e2e8f0; }
        tr:nth-child(even) { background: #f8fafc; }

        .slide-footer { display: flex; justify-content: space-between; align-items: center; padding-top: 20px; border-top: 1px solid #e2e8f0; margin-top: auto; }
        .slide-footer .logo { font-weight: 700; font-size: 1.2rem; color: var(--dark); }
        .slide-footer .logo span { color: var(--primary); }
        .slide-footer .page-number { background: var(--dark); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; }

        .nav-hint { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: white; padding: 12px 24px; border-radius: 30px; font-size: 0.9rem; z-index: 1000; opacity: 0; transition: opacity 0.3s; }
        .nav-hint.visible { opacity: 1; }

        .workflow-step { display: flex; align-items: flex-start; gap: 20px; margin-bottom: 20px; }
        .step-number { background: var(--primary); color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.2rem; flex-shrink: 0; }
        .step-content { flex: 1; }
        .step-content h4 { font-size: 1.2rem; color: var(--dark); margin-bottom: 5px; }
        .step-content p { font-size: 1rem; color: var(--text-light); }

        @media print {
            .slide { page-break-after: always; display: flex !important; }
            .nav-hint { display: none; }
        }
    </style>
</head>
<body>
    <div class="presentation" id="presentation">

        <!-- Slide 1: Title -->
        <div class="slide title-slide active" data-slide="1">
            <h1 class="reveal-title">How to Compile FLUX<span>OS</span></h1>
            <div class="subtitle reveal-subtitle">Build System &amp; Configuration Guide</div>
            <div class="author reveal-author">Diogo Costa</div>
            <div class="affiliation reveal-affiliation">University of &Eacute;vora, Portugal</div>
            <img src="uevora_logo.png" alt="University of &Eacute;vora" class="university-logo reveal-logo">
            <button class="pdf-btn" onclick="exportToPDF()">&#128196; Export to PDF</button>
        </div>

        <!-- Slide 2: Contents -->
        <div class="slide" data-slide="2">
            <div class="slide-header">
                <h2>Contents</h2>
            </div>
            <div class="slide-content">
                <div class="two-column" style="gap: 60px;">
                    <div class="column">
                        <div style="font-size: 1.15rem; line-height: 2.2;">
                            <p style="margin-bottom: 8px;">&bull; Prerequisites &amp; Dependencies</p>
                            <p style="margin-bottom: 8px;">&bull; Optional Dependencies</p>
                            <p style="margin-top: 15px; color: var(--primary); font-weight: 600;">Section 01: Build Configurations</p>
                            <p style="margin-left: 20px; margin-bottom: 8px;">&bull; Basic Build (Regular Mesh)</p>
                            <p style="margin-left: 20px; margin-bottom: 8px;">&bull; Triangular Mesh Build</p>
                            <p style="margin-left: 20px; margin-bottom: 8px;">&bull; CUDA GPU Build</p>
                            <p style="margin-left: 20px; margin-bottom: 8px;">&bull; MPI Distributed Build</p>
                        </div>
                    </div>
                    <div class="column">
                        <div style="font-size: 1.15rem; line-height: 2.2;">
                            <p style="margin-top: 15px; color: #7c3aed; font-weight: 600;">Section 02: Advanced &amp; Troubleshooting</p>
                            <p style="margin-left: 20px; margin-bottom: 8px;">&bull; Hybrid Build Combinations</p>
                            <p style="margin-left: 20px; margin-bottom: 8px;">&bull; Scalability Guidelines</p>
                            <p style="margin-left: 20px; margin-bottom: 8px;">&bull; Common Build Errors</p>
                            <p style="margin-left: 20px; margin-bottom: 8px;">&bull; Build Summary</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">2</div>
            </div>
        </div>

        <!-- Slide 3: Prerequisites -->
        <div class="slide" data-slide="3">
            <div class="slide-header">
                <h2>Prerequisites &amp; Dependencies</h2>
            </div>
            <div class="slide-content">
                <div class="two-column" style="gap: 50px;">
                    <div class="column">
                        <div class="card primary">
                            <h3>&#128230; Required Dependencies</h3>
                            <table style="font-size: 1rem; margin-top: 10px;">
                                <tr><td><strong>CMake</strong></td><td>&ge; 3.18</td></tr>
                                <tr><td><strong>C++ Compiler</strong></td><td>C++17 support (GCC 7+, Clang 5+)</td></tr>
                                <tr><td><strong>Armadillo</strong></td><td>Linear algebra library</td></tr>
                                <tr><td><strong>nlohmann/json</strong></td><td>JSON config parser (header-only)</td></tr>
                                <tr><td><strong>OpenMP</strong></td><td>Shared-memory parallelism</td></tr>
                            </table>
                        </div>
                        <pre style="font-size: 0.8rem; padding: 15px;">
<span class="comment"># Ubuntu/Debian</span>
sudo apt install cmake g++ libarmadillo-dev nlohmann-json3-dev

<span class="comment"># macOS (Homebrew)</span>
brew install cmake armadillo nlohmann-json</pre>
                    </div>
                    <div class="column">
                        <div class="card secondary">
                            <h3>&#128268; Optional Dependencies</h3>
                            <table style="font-size: 1rem; margin-top: 10px;">
                                <tr><td><strong>CUDA Toolkit</strong></td><td>&ge; 11.0 (GPU acceleration)</td></tr>
                                <tr><td><strong>OpenMPI</strong></td><td>Distributed computing</td></tr>
                                <tr><td><strong>Gmsh</strong></td><td>Mesh generation (trimesh)</td></tr>
                                <tr><td><strong>OpenWQ</strong></td><td>Water quality coupling</td></tr>
                            </table>
                        </div>
                        <pre style="font-size: 0.8rem; padding: 15px;">
<span class="comment"># Ubuntu/Debian (optional)</span>
sudo apt install libopenmpi-dev gmsh

<span class="comment"># CUDA: Install from NVIDIA website</span>
<span class="comment"># https://developer.nvidia.com/cuda-downloads</span></pre>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">3</div>
            </div>
        </div>

        <!-- Slide 4: Section - Build Configurations -->
        <div class="slide section-slide" data-slide="4">
            <div class="section-number">01</div>
            <h2>Build Configurations</h2>
            <img src="uevora_logo.png" alt="University of &Eacute;vora" class="university-logo">
        </div>

        <!-- Slide 5: Basic Build -->
        <div class="slide" data-slide="5">
            <div class="slide-header">
                <h2>Basic Build (Regular Mesh)</h2>
            </div>
            <div class="slide-content">
                <p style="font-size: 1.15rem; margin-bottom: 20px;">
                    The default build compiles the regular Cartesian mesh solver with OpenMP parallelization:
                </p>
                <pre style="font-size: 1rem; padding: 30px;">
<span class="comment"># Clone the repository</span>
git clone https://github.com/ue-hydro/fluxos.git
cd fluxos

<span class="comment"># Create build directory</span>
mkdir build && cd build

<span class="comment"># Configure with release optimizations</span>
cmake -DMODE_release=ON ..

<span class="comment"># Compile using all available cores</span>
make -j$(nproc)

<span class="comment"># The executable will be at: build/fluxos</span></pre>
                <div class="two-column" style="gap: 40px; margin-top: 20px;">
                    <div class="highlight-box success">
                        <strong>Release mode</strong> enables <code>-O3 -march=native -flto</code> for maximum performance with link-time optimization.
                    </div>
                    <div class="highlight-box info">
                        <strong>Debug mode</strong> (default, no <code>-DMODE_release=ON</code>) enables <code>-g3 -Wall -pedantic</code> and produces <code>fluxos_debug</code>.
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">5</div>
            </div>
        </div>

        <!-- Slide 6: Triangular Mesh Build -->
        <div class="slide" data-slide="6">
            <div class="slide-header">
                <h2>Triangular Mesh Build</h2>
            </div>
            <div class="slide-content">
                <p style="font-size: 1.15rem; margin-bottom: 20px;">
                    Enable unstructured triangular mesh support for complex geometries and VTK/ParaView output:
                </p>
                <pre style="font-size: 1rem; padding: 30px;">
<span class="comment"># Configure with triangular mesh support</span>
cmake -DMODE_release=ON -DUSE_TRIMESH=ON ..

<span class="comment"># Compile</span>
make -j$(nproc)</pre>
                <div class="two-column" style="gap: 40px; margin-top: 25px;">
                    <div class="column">
                        <div class="card primary">
                            <h3>What Changes</h3>
                            <ul style="margin-left: 15px;">
                                <li style="font-size: 1rem;">Compiles all <code>src/fluxos/trimesh/</code> sources</li>
                                <li style="font-size: 1rem;">Edge-based finite volume solver</li>
                                <li style="font-size: 1rem;">Input: Gmsh (.msh v2.2) or Triangle (.node/.ele)</li>
                                <li style="font-size: 1rem;">Output: VTK XML (.vtu) + ParaView time series (.pvd)</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card secondary">
                            <h3>&#9889; Performance Advantage</h3>
                            <p style="font-size: 1.1rem; margin-top: 10px;">
                                Same Rosa_2m test domain:<br>
                                <strong>Regular mesh:</strong> ~16 minutes<br>
                                <strong>Triangular mesh:</strong> ~3 seconds<br><br>
                                Slope-adaptive refinement places resolution where it matters.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">6</div>
            </div>
        </div>

        <!-- Slide 7: CUDA Build -->
        <div class="slide" data-slide="7">
            <div class="slide-header">
                <h2>CUDA GPU Build</h2>
            </div>
            <div class="slide-content">
                <p style="font-size: 1.15rem; margin-bottom: 20px;">
                    Enable NVIDIA GPU acceleration for both regular and triangular meshes:
                </p>
                <pre style="font-size: 1rem; padding: 30px;">
<span class="comment"># Regular mesh + CUDA</span>
cmake -DMODE_release=ON -DUSE_CUDA=ON ..

<span class="comment"># Triangular mesh + CUDA (recommended for best performance)</span>
cmake -DMODE_release=ON -DUSE_TRIMESH=ON -DUSE_CUDA=ON ..

<span class="comment"># Compile</span>
make -j$(nproc)</pre>
                <div class="two-column" style="gap: 40px; margin-top: 20px;">
                    <div class="column">
                        <div class="card primary">
                            <h3>Requirements</h3>
                            <table style="font-size: 1rem; margin-top: 10px;">
                                <tr><td><strong>CUDA Toolkit</strong></td><td>&ge; 11.0</td></tr>
                                <tr><td><strong>GPU Compute</strong></td><td>&ge; 6.0 (Pascal+)</td></tr>
                                <tr><td><strong>Driver</strong></td><td>Compatible with CUDA version</td></tr>
                            </table>
                        </div>
                    </div>
                    <div class="column">
                        <div class="highlight-box success">
                            <strong>Typical speedup:</strong> 10&ndash;50x over single CPU core, depending on domain size and GPU architecture.
                        </div>
                        <div class="highlight-box info" style="margin-top: 10px;">
                            <strong>Verify GPU:</strong> Run <code>nvidia-smi</code> to check your GPU and driver version.
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">7</div>
            </div>
        </div>

        <!-- Slide 8: MPI Build -->
        <div class="slide" data-slide="8">
            <div class="slide-header">
                <h2>MPI Distributed Build</h2>
            </div>
            <div class="slide-content">
                <p style="font-size: 1.15rem; margin-bottom: 20px;">
                    Enable MPI for distributed computing on HPC clusters:
                </p>
                <pre style="font-size: 1rem; padding: 30px;">
<span class="comment"># Configure with MPI</span>
cmake -DMODE_release=ON -DUSE_MPI=ON ..

<span class="comment"># Compile</span>
make -j$(nproc)

<span class="comment"># Run with multiple processes</span>
mpirun -np 16 ./fluxos modset.json

<span class="comment"># Hybrid MPI+OpenMP (4 MPI procs x 4 threads each)</span>
export OMP_NUM_THREADS=4
mpirun -np 4 ./fluxos modset.json</pre>
                <div class="two-column" style="gap: 40px; margin-top: 15px;">
                    <div class="column">
                        <div class="card primary">
                            <h3>Regular Mesh MPI</h3>
                            <p style="font-size: 1rem;">2D Cartesian domain decomposition with ghost cell exchange at subdomain boundaries.</p>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card secondary">
                            <h3>Triangular Mesh MPI</h3>
                            <p style="font-size: 1rem;">Graph-based partitioning (METIS support) for balanced load distribution across nodes.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">8</div>
            </div>
        </div>

        <!-- Slide 9: Section - Advanced -->
        <div class="slide section-slide purple" data-slide="9">
            <div class="section-number">02</div>
            <h2>Advanced &amp; Troubleshooting</h2>
            <img src="uevora_logo.png" alt="University of &Eacute;vora" class="university-logo">
        </div>

        <!-- Slide 10: Hybrid Build -->
        <div class="slide" data-slide="10">
            <div class="slide-header">
                <h2>Hybrid Build Combinations</h2>
            </div>
            <div class="slide-content">
                <p style="font-size: 1.15rem; margin-bottom: 20px;">
                    All CMake flags can be combined for maximum flexibility:
                </p>
                <table style="margin-bottom: 25px;">
                    <tr>
                        <th>Configuration</th>
                        <th>CMake Command</th>
                        <th>Use Case</th>
                    </tr>
                    <tr>
                        <td><strong>OpenMP only</strong></td>
                        <td><code>cmake -DMODE_release=ON ..</code></td>
                        <td>Single workstation</td>
                    </tr>
                    <tr>
                        <td><strong>MPI + OpenMP</strong></td>
                        <td><code>cmake -DMODE_release=ON -DUSE_MPI=ON ..</code></td>
                        <td>Multi-node HPC</td>
                    </tr>
                    <tr>
                        <td><strong>Trimesh + CUDA</strong></td>
                        <td><code>cmake -DMODE_release=ON -DUSE_TRIMESH=ON -DUSE_CUDA=ON ..</code></td>
                        <td>Single GPU workstation</td>
                    </tr>
                    <tr>
                        <td><strong>Full hybrid</strong></td>
                        <td><code>cmake -DMODE_release=ON -DUSE_MPI=ON -DUSE_CUDA=ON ..</code></td>
                        <td>Multi-GPU HPC cluster</td>
                    </tr>
                    <tr>
                        <td><strong>With OpenWQ</strong></td>
                        <td><code>cmake -DMODE_release=ON -DUSE_OPENWQ=ON ..</code></td>
                        <td>Water quality coupling</td>
                    </tr>
                </table>
                <div class="highlight-box info">
                    <strong>Tip:</strong> Always start with the simplest configuration that meets your needs. Add complexity only when required for your domain size or performance targets.
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">10</div>
            </div>
        </div>

        <!-- Slide 11: Scalability -->
        <div class="slide" data-slide="11">
            <div class="slide-header">
                <h2>Scalability Guidelines</h2>
            </div>
            <div class="slide-content">
                <table style="margin-bottom: 25px;">
                    <tr>
                        <th>Domain Size</th>
                        <th>Recommended Configuration</th>
                        <th>Approx. Cores</th>
                    </tr>
                    <tr>
                        <td>&lt; 1,000 &times; 1,000</td>
                        <td>OpenMP only (single node)</td>
                        <td>4&ndash;16</td>
                    </tr>
                    <tr>
                        <td>1,000 &ndash; 5,000&sup2;</td>
                        <td>MPI (4&ndash;16 processes)</td>
                        <td>16&ndash;64</td>
                    </tr>
                    <tr>
                        <td>5,000 &ndash; 10,000&sup2;</td>
                        <td>MPI (16&ndash;64 processes)</td>
                        <td>64&ndash;256</td>
                    </tr>
                    <tr>
                        <td>&gt; 10,000&sup2;</td>
                        <td>MPI (64+ processes) or CUDA</td>
                        <td>256+</td>
                    </tr>
                </table>
                <div class="two-column" style="gap: 40px;">
                    <div class="highlight-box success">
                        <strong>Hybrid MPI+OpenMP:</strong> Use 2&ndash;4 OpenMP threads per MPI process. Example for 64 cores: 16 MPI processes &times; 4 OpenMP threads.
                    </div>
                    <div class="highlight-box info">
                        <strong>GPU alternative:</strong> For domains up to ~10,000&sup2;, a single CUDA-enabled GPU can often match or exceed multi-node MPI performance.
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">11</div>
            </div>
        </div>

        <!-- Slide 12: Common Build Errors -->
        <div class="slide" data-slide="12">
            <div class="slide-header">
                <h2>Common Build Errors</h2>
            </div>
            <div class="slide-content">
                <div class="two-column" style="gap: 40px;">
                    <div class="column">
                        <div class="card accent" style="padding: 20px;">
                            <h3 style="font-size: 1.2rem;">Armadillo not found</h3>
                            <pre style="font-size: 0.75rem; padding: 10px; margin-top: 10px;">
<span class="comment"># Install Armadillo development package</span>
sudo apt install libarmadillo-dev

<span class="comment"># Or set path manually</span>
cmake -DARMADILLO_INCLUDE_DIR=/path/to/armadillo ..</pre>
                        </div>
                        <div class="card accent" style="padding: 20px;">
                            <h3 style="font-size: 1.2rem;">CUDA compiler not found</h3>
                            <pre style="font-size: 0.75rem; padding: 10px; margin-top: 10px;">
<span class="comment"># Ensure nvcc is in PATH</span>
export PATH=/usr/local/cuda/bin:$PATH
export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH</pre>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card accent" style="padding: 20px;">
                            <h3 style="font-size: 1.2rem;">MPI compiler wrapper</h3>
                            <pre style="font-size: 0.75rem; padding: 10px; margin-top: 10px;">
<span class="comment"># CMake should auto-detect, but if not:</span>
cmake -DCMAKE_CXX_COMPILER=mpicxx ..</pre>
                        </div>
                        <div class="card accent" style="padding: 20px;">
                            <h3 style="font-size: 1.2rem;">JSON library not found</h3>
                            <pre style="font-size: 0.75rem; padding: 10px; margin-top: 10px;">
<span class="comment"># nlohmann/json is header-only</span>
sudo apt install nlohmann-json3-dev

<span class="comment"># Or download single header:</span>
<span class="comment"># https://github.com/nlohmann/json/releases</span></pre>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">12</div>
            </div>
        </div>

        <!-- Slide 13: Summary -->
        <div class="slide" data-slide="13">
            <div class="slide-header">
                <h2>Build Summary</h2>
            </div>
            <div class="slide-content">
                <div class="center-content">
                    <div style="max-width: 900px;">
                        <pre style="font-size: 1rem; padding: 30px; margin-bottom: 30px;">
<span class="comment"># Quick start: clone, build, run</span>
git clone https://github.com/ue-hydro/fluxos.git
cd fluxos && mkdir build && cd build
cmake -DMODE_release=ON ..
make -j$(nproc)
./fluxos ../bin/modset.json</pre>
                        <div class="three-column" style="gap: 25px;">
                            <div class="card primary" style="text-align: center; padding: 20px;">
                                <h3 style="justify-content: center; font-size: 1.2rem;">&#128230; Required</h3>
                                <p style="font-size: 0.95rem;">CMake 3.18+, C++17, Armadillo, nlohmann/json</p>
                            </div>
                            <div class="card secondary" style="text-align: center; padding: 20px;">
                                <h3 style="justify-content: center; font-size: 1.2rem;">&#128268; Optional</h3>
                                <p style="font-size: 0.95rem;">CUDA 11+, OpenMPI, Gmsh, OpenWQ</p>
                            </div>
                            <div class="card accent" style="text-align: center; padding: 20px;">
                                <h3 style="justify-content: center; font-size: 1.2rem;">&#9881;&#65039; Flags</h3>
                                <p style="font-size: 0.95rem;">USE_TRIMESH, USE_CUDA, USE_MPI, USE_OPENWQ</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-footer">
                <div class="logo">FLUX<span>OS</span></div>
                <div class="page-number">13</div>
            </div>
        </div>

        <!-- Slide 14: Thank You -->
        <div class="slide title-slide" data-slide="14">
            <h1 style="font-size: 3.5rem;">Thank You</h1>
            <div class="subtitle" style="font-size: 1.8rem;">Questions &amp; Resources</div>
            <div style="margin-top: 3rem;">
                <p style="font-size: 1.4rem; color: #a0aec0; margin-bottom: 15px;">
                    <strong>GitHub:</strong> github.com/ue-hydro/fluxos
                </p>
                <p style="font-size: 1.4rem; color: #a0aec0; margin-bottom: 15px;">
                    <strong>Documentation:</strong> fluxos-cpp.readthedocs.io
                </p>
                <p style="font-size: 1.4rem; color: #a0aec0;">
                    <strong>Contact:</strong> diogo.costa@uevora.pt
                </p>
            </div>
            <img src="uevora_logo.png" alt="University of &Eacute;vora" class="university-logo">
            <button class="pdf-btn" onclick="exportToPDF()">&#128196; Export to PDF</button>
        </div>

    </div>

    <div class="nav-hint" id="navHint">Use &larr; &rarr; arrows to navigate | Press F for fullscreen</div>

    <script>
        let currentSlide = 1;
        const totalSlides = document.querySelectorAll('.slide').length;

        function showSlide(n) {
            const slides = document.querySelectorAll('.slide');
            if (n > totalSlides) currentSlide = 1;
            if (n < 1) currentSlide = totalSlides;
            slides.forEach(slide => slide.classList.remove('active'));
            slides[currentSlide - 1].classList.add('active');
            history.replaceState(null, null, `#${currentSlide}`);
        }

        function nextSlide() { currentSlide++; showSlide(currentSlide); }
        function prevSlide() { currentSlide--; showSlide(currentSlide); }

        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowRight': case 'ArrowDown': case ' ': case 'PageDown': case 'Enter': nextSlide(); break;
                case 'ArrowLeft': case 'ArrowUp': case 'PageUp': prevSlide(); break;
                case 'Home': currentSlide = 1; showSlide(currentSlide); break;
                case 'End': currentSlide = totalSlides; showSlide(currentSlide); break;
                case 'f': case 'F': toggleFullscreen(); break;
            }
        });

        function toggleFullscreen() {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen();
            else document.exitFullscreen();
        }

        const navHint = document.getElementById('navHint');
        navHint.classList.add('visible');
        setTimeout(() => navHint.classList.remove('visible'), 4000);

        let hintTimeout;
        document.addEventListener('mousemove', () => {
            navHint.classList.add('visible');
            clearTimeout(hintTimeout);
            hintTimeout = setTimeout(() => navHint.classList.remove('visible'), 2000);
        });

        if (window.location.hash) {
            const slideNum = parseInt(window.location.hash.substring(1));
            if (slideNum >= 1 && slideNum <= totalSlides) currentSlide = slideNum;
        }
        showSlide(currentSlide);

        let touchStartX = 0;
        document.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; });
        document.addEventListener('touchend', (e) => {
            const diff = touchStartX - e.changedTouches[0].screenX;
            if (Math.abs(diff) > 50) { if (diff > 0) nextSlide(); else prevSlide(); }
        });

        function addCopyButtons() {
            document.querySelectorAll('pre').forEach(pre => {
                if (pre.closest('.diagram')) return;
                if (pre.parentElement.classList.contains('code-container')) return;
                const wrapper = document.createElement('div');
                wrapper.className = 'code-container';
                pre.parentNode.insertBefore(wrapper, pre);
                wrapper.appendChild(pre);
                const btn = document.createElement('button');
                btn.className = 'copy-btn';
                btn.innerHTML = '&#128203; Copy';
                btn.onclick = function() {
                    navigator.clipboard.writeText(pre.textContent).then(() => {
                        btn.innerHTML = '&#10003; Copied!';
                        btn.classList.add('copied');
                        setTimeout(() => { btn.innerHTML = '&#128203; Copy'; btn.classList.remove('copied'); }, 2000);
                    });
                };
                wrapper.appendChild(btn);
            });
        }
        addCopyButtons();

        function exportToPDF() {
            const slides = document.querySelectorAll('.slide');
            const presentation = document.getElementById('presentation');
            const originalPresentationStyle = presentation.style.cssText;
            const originalBodyStyle = document.body.style.cssText;
            const originalHtmlStyle = document.documentElement.style.cssText;
            const originalSlideStyles = Array.from(slides).map(s => s.style.cssText);
            const printStyles = document.createElement('style');
            printStyles.id = 'print-styles';
            printStyles.textContent = `@media print { @page { size: landscape; margin: 0; } * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; } html, body { height: auto !important; overflow: visible !important; background: white !important; } .presentation { height: auto !important; position: relative !important; overflow: visible !important; } .slide { display: flex !important; position: relative !important; page-break-after: always !important; page-break-inside: avoid !important; height: 100vh !important; width: 100vw !important; margin: 0 !important; box-sizing: border-box !important; } .slide:last-child { page-break-after: auto !important; } .nav-hint, .pdf-btn, .copy-btn { display: none !important; } .university-logo { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; } }`;
            document.head.appendChild(printStyles);
            document.body.style.cssText = 'height: auto; overflow: visible;';
            document.documentElement.style.cssText = 'height: auto; overflow: visible;';
            presentation.style.cssText = 'height: auto; position: relative; overflow: visible;';
            slides.forEach(slide => { slide.style.display = 'flex'; slide.style.position = 'relative'; slide.style.pageBreakAfter = 'always'; slide.style.height = '100vh'; slide.style.width = '100vw'; });
            setTimeout(() => {
                window.print();
                setTimeout(() => {
                    document.getElementById('print-styles')?.remove();
                    document.body.style.cssText = originalBodyStyle;
                    document.documentElement.style.cssText = originalHtmlStyle;
                    presentation.style.cssText = originalPresentationStyle;
                    slides.forEach((slide, i) => { slide.style.cssText = originalSlideStyles[i]; });
                    showSlide(currentSlide);
                }, 500);
            }, 100);
        }
    </script>
</body>
</html>
